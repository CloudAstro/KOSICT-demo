cert-manager:
  global:
    rbac:
      create: true
      aggregateClusterRoles: true
    podSecurityPolicy:
      enabled: false
      useAppArmor: true
    logLevel: 2
    leaderElection:
      namespace: "kube-system"

  crds:
    enabled: true
    keep: true
  replicaCount: 1

  podDisruptionBudget:
    enabled: false
  maxConcurrentChallenges: 60

  image:
    repository: quay.io/jetstack/cert-manager-controller
    pullPolicy: IfNotPresent

  fullnameOverride: "cert-manager"
  nameOverride: "cert-manager"

  serviceAccount:
    create: true
    automountServiceAccountToken: true
  enableCertificateOwnerRef: false
  dns01RecursiveNameserversOnly: false

  disableAutoApproval: false

  approveSignerNames:
  - issuers.cert-manager.io/*
  - clusterissuers.cert-manager.io/*

  resources: 
    requests:
      cpu: 10m
      memory: 32Mi

  securityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    allowPrivilegeEscalation: false
    capabilities:
      drop:
      - ALL
    readOnlyRootFilesystem: true

  nodeSelector:
    kubernetes.io/os: linux
  livenessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 15
    successThreshold: 1
    failureThreshold: 8

  enableServiceLinks: false

  prometheus:
    enabled: true
    servicemonitor:
      enabled: false
      prometheusInstance: default
      targetPort: http-metrics
      path: /metrics
      interval: 60s
      scrapeTimeout: 30s
      honorLabels: false
    podmonitor:
      enabled: false
      prometheusInstance: default
      path: /metrics
      interval: 60s
      scrapeTimeout: 30s
      honorLabels: false
  webhook:
    replicaCount: 1
    timeoutSeconds: 30
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      readOnlyRootFilesystem: true

    podDisruptionBudget:
      enabled: false
    validatingWebhookConfiguration:
      namespaceSelector:
        matchExpressions:
          - key: "cert-manager.io/disable-validation"
            operator: "NotIn"
            values:
              - "true"

    livenessProbe:
      failureThreshold: 3
      initialDelaySeconds: 60
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 1
    readinessProbe:
      failureThreshold: 3
      initialDelaySeconds: 5
      periodSeconds: 5
      successThreshold: 1
      timeoutSeconds: 1
    nodeSelector:
      kubernetes.io/os: linux

    image:
      repository: quay.io/jetstack/cert-manager-webhook
      pullPolicy: IfNotPresent
    serviceAccount:
      create: true
      automountServiceAccountToken: true
    securePort: 10250
    hostNetwork: false
    serviceType: ClusterIP
    networkPolicy:
      enabled: false
      ingress:
      - from:
        - ipBlock:
            cidr: 0.0.0.0/0
      egress:
      - ports:
        - port: 80
          protocol: TCP
        - port: 443
          protocol: TCP
        - port: 53
          protocol: TCP
        - port: 53
          protocol: UDP
        to:
        - ipBlock:
            cidr: 0.0.0.0/0

    enableServiceLinks: false

  cainjector:
    enabled: true
    replicaCount: 1
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      readOnlyRootFilesystem: true

    podDisruptionBudget:
      enabled: false
    nodeSelector:
      kubernetes.io/os: linux
    image:
      repository: quay.io/jetstack/cert-manager-cainjector
      pullPolicy: IfNotPresent
    serviceAccount:
      create: true
      automountServiceAccountToken: true
    enableServiceLinks: false

  acmesolver:
    image:
      repository: quay.io/jetstack/cert-manager-acmesolver
      pullPolicy: IfNotPresent

  startupapicheck:
    enabled: true
    securityContext:
      runAsNonRoot: true
      seccompProfile:
        type: RuntimeDefault
    containerSecurityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      readOnlyRootFilesystem: true
    timeout: 1m
    backoffLimit: 4
    jobAnnotations:
      helm.sh/hook: post-install
      helm.sh/hook-weight: "1"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    extraArgs:
    - -v
    nodeSelector:
      kubernetes.io/os: linux
    image:
      repository: quay.io/jetstack/cert-manager-startupapicheck
      pullPolicy: IfNotPresent

    rbac:
      annotations:
        helm.sh/hook: post-install
        helm.sh/hook-weight: "-5"
        helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
    serviceAccount:
      create: true
      annotations:
        helm.sh/hook: post-install
        helm.sh/hook-weight: "-5"
        helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
      automountServiceAccountToken: true
    enableServiceLinks: false

  creator: "helm"
  enabled: true
